## 头条国际化一面

自我介绍

项目介绍

mysql优化经验、分库分表、count(*),count(1),count(column)区别

redis缓存一致性（binlog延迟了怎么办？）、主从延迟怎么解决，分布式事务，事务消息

短链系统设计

leetcode 11 [盛最多水的容器](https://leetcode-cn.com/problems/container-with-most-water/)

## B站一面

自我介绍

项目介绍

布隆过滤器

滑动窗口实现

synchronized相关

NIO IO多路复用的几种实现方式 epoll相关

算法：分割字符串 split(String a, Sting b)，用b分割a

## 2022-05-16 14:00 还呗

项目介绍

类加载过程

缓存的热备

java中 lock()是轻量级锁还是重量级锁

dubbo rpc协议，以及注册与发现过程

NIO

数据库update语句执行过程

链路追踪设计

业务意向

## 2022年5月17日 星期二16:00 政采云

项目相关

rocketMQ顺序消息相关，分区有序扩容了是怎么处理的

答：增加一层逻辑分区，一个逻辑分区对应一个队列组的概念，一个队列组有多个物理队列。逻辑队列固定，物理队列可以无限扩容。但是在消息投递的时候根据保序协议还是根据逻辑队列中的顺序投递。这样就可以业务无影响的扩容队列数，同时可以避免热点key问题。

es相关

## 2022年5月18日 星期三 11:00 xTranfer

项目介绍

数据一致性问题

mysql隔离级别

可重复读的实现

varchar字段长度对性能的影响

答：在数据存储上差别不大，因为varchar是变长的。但是在索引上，字段越长会导致索引越大。而且mysql的数据是存储在数据页中的，数据页大小一般固定，所以大字段会导致B+树的分叉更少，进而导致树的深度更大，磁盘IO更多。其次如果根据这个字段排序，也可能导致mysql使用更多的辅助文件。

线程进程的区别

sleep和wait的区别

答：sleep可以再任何地方调用，而wait只能在同步块或者同步方法中；sleep不会释放锁，而wait会。

synchronized实现

分布式锁相关

## 2022年5月19日 星期四14:30 Shopee

自我介绍

项目介绍

快速排序原理介绍

两个队列实现栈

红黑树与二叉搜索树、平衡二叉树的比较

tcp四次挥手

进程通信方式

redis 持久化

mysql索引优化

算法题：[143. 重排链表](https://leetcode.cn/problems/reorder-list/)

## 2022年5月23日 星期一14:00 政采云复试

项目介绍

rocketMQ 读写队列的原理

答：一般配置为1:1，主要是为了方便扩缩容，比如缩容，先缩容写队列，再缩容读队列。

在消息发送时，根据写队列个数返回路由信息，而消息消费时按照读队列个数返回路由信息。

https://www.shangmayuan.com/a/f8a1e23bf8b44766a7db28c1.html

https://zhuanlan.zhihu.com/p/448483326

sso 跨域实现   答：JSONP发起跨域请求，同步登录态

sso token续期问题 

答：1-浏览器定时任务主动刷新。2-惰性刷新，每次请求都校验过期时间，快过期时续期。3-每次请求都重新申请token。4-使用两个token，一个accessToken，一个refreshToken。

## shopee二面

自我介绍

在线教育系统设计  -- 比如极客时间

套领域驱动，先了解有哪些数据，然后对这些数据进行领域划分（类图，属性与方法），随后再考虑微服务的拆分（从单体到拆分）

算法题：字符串相加

## 5月30 平安一面

## 5月31 蔚来一面

项目介绍

算法题：下一个排列

## 6月01 完美世界一面

mvcc实现

线程池调优，核心线程数设置

es 百分比查询实现，实际业务：超过了百分之多少的用户

dubbo zk挂了，rpc还能正常调用吗？

算法：二叉树翻转

## 6月01 b站国际化一面

项目介绍

数据一致性保证

mysql 幻读 sql优化

redis 缓存一致性 缓存穿透，缓存击穿 redis分布式锁

raft协议介绍

注册中心列举，以及zk的优缺点

rpc调用流程

限流算法 令牌桶算法实现--手写

动态系统设计：如何及时收到up主的动态。一般是推和拉结合的模式，小up主采用推(写扩散)，大up主（粉丝很多）采用拉（读扩散）

## 6月01 携程一面

自我介绍

项目介绍

数据一致性，资金准确性问题

1000万数据汇总该怎么做

计费规则输入错误，导致计费错误，该如何发现？

答：我们当前系统并没有比较好的措施。但是可以考虑设计一个历史均值预测系统。即正常的商家结算，如果你的业务比较稳定的话，那么他每月的结算金额可能是相差不大的。这样你就可以计算一个每月的均值，然后在设置一个阈值范围，比如上下10%，超过这个阈值范围就认为是可能异常，然后让业务进行二次check。

